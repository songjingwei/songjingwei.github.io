import{j as a,a as p,b as P,m as j,r as i,X as R,B as z,a0 as $,ay as E,a3 as b}from"./index-CybXJaB_.js";import{L as W}from"./login-logo-Bs7gJD3W.js";import{d as Z}from"./DoubleChevron_Right-DMi0VZvK.js";import{A as T}from"./ArrowLeftIcon-udHCKLBD.js";import{A as X}from"./ArrowRightIcon-piqPE_18.js";const G=""+new URL("../assets/ring-DAdiZNg2.png",import.meta.url).href,V="_card_1gm39_1",K="_mainCard_1gm39_16",y={card:V,mainCard:K},C=_=>{const{avatar:o,name:c,onClick:l,isMain:r=!1,imageSize:g=70}=_;return a.jsxs("button",{type:"button",className:p(r?y.mainCard:y.card,"relative",`${r?"w-50 h-50":"w-45 h-45"}`,"rounded-2xl",`${r?"bg-[rgba(0,173,238,0.05)]":"bg-[rgba(0,173,238,0.02)]"}`,"backdrop-blur-xs",r?"shadow-[0_0_24px_0_rgba(0,173,238,0.05)_inset,0_0_10px_1px_rgba(0,173,238,0.2)_inset,0_8px_20px_-8px_rgba(0,173,238,0.4)_inset,0_5px_12px_4px_rgba(0,0,0,0.05),0_3px_6px_0_rgba(0,0,0,0.08),0_1px_2px_-2px_rgba(0,0,0,0.12),0_0_16px_3px_rgba(0,173,238,0.35),0_0_32px_6px_rgba(0,173,238,0.18)]":"shadow-[0_0_24px_0_rgba(0,173,238,0.05)_inset,0_5px_12px_4px_rgba(0,0,0,0.05),0_3px_6px_0_rgba(0,0,0,0.08),0_1px_2px_-2px_rgba(0,0,0,0.12)]","flex items-center justify-center","transition-all duration-200 ease-in-out","cursor-pointer","hover:scale-105","hover:bg-[rgba(0,173,238,0.08)]","active:scale-95"),onClick:l,children:[a.jsxs("div",{className:p("flex flex-col items-center",g===70?"gap-5":"gap-3"),children:[a.jsx("img",{src:o,alt:c,style:{width:r?80:g,height:r?80:g},className:"object-cover"}),a.jsx("span",{className:p("text-base text-[#00adee] font-bold","truncate px-2",r?"max-w-[160px]":"max-w-[140px]",r&&"[text-shadow:0_0_4px_#00ADEE]"),title:c,children:c})]}),r&&a.jsx("img",{src:G,alt:"ring",className:"absolute w-[104px] h-[104px] -top-1/2 -left-1/2 translate-x-3/4 translate-y-2/3"}),r&&a.jsx("div",{className:"bg-[rgba(0,173,238,0.1)] absolute right-0 top-0 px-3 py-1.5 rounded-tr-2xl rounded-bl-2xl text-[10px] text-[#00adee] leading-3.5 font-bold]",children:"主账号"}),r&&a.jsx("div",{className:"absolute w-4/5 h-4 -bottom-3 left-1/2 -translate-x-1/2 bg-[var(--hover-Border)] blur-xl"})]})},U=""+new URL("../assets/Steam-bZNKXuDm.svg",import.meta.url).href,q="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16669%2013.3334V10C9.16669%209.53978%209.53978%209.16669%2010%209.16669C10.4603%209.16669%2010.8334%209.53978%2010.8334%2010V13.3334C10.8334%2013.7936%2010.4603%2014.1667%2010%2014.1667C9.53978%2014.1667%209.16669%2013.7936%209.16669%2013.3334Z'%20fill='%23BAD7F5'/%3e%3cpath%20d='M10%205.41669C10.6904%205.41669%2011.25%205.97633%2011.25%206.66669C11.25%207.35702%2010.6904%207.91669%2010%207.91669C9.30968%207.91669%208.75005%207.35702%208.75002%206.66669C8.75002%205.97633%209.30966%205.41669%2010%205.41669Z'%20fill='%23BAD7F5'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%201.66669C14.6024%201.66669%2018.3334%205.39765%2018.3334%2010C18.3334%2014.6024%2014.6024%2018.3334%2010%2018.3334C5.39765%2018.3334%201.66669%2014.6024%201.66669%2010C1.66669%205.39765%205.39765%201.66669%2010%201.66669ZM10%203.33335C6.31812%203.33335%203.33335%206.31812%203.33335%2010C3.33335%2013.6819%206.31812%2016.6667%2010%2016.6667C13.6819%2016.6667%2016.6667%2013.6819%2016.6667%2010C16.6667%206.31812%2013.6819%203.33335%2010%203.33335Z'%20fill='%23BAD7F5'/%3e%3c/svg%3e",H="_glassButtonContainer_1g9t0_1",J={glassButtonContainer:H},N=({children:_,onClick:o,className:c})=>a.jsx("button",{type:"button",className:p(J.glassButtonContainer,"relative overflow-hidden","w-10 h-10 rounded-2xl","bg-b10 backdrop-blur-lg","text-b100",c),onClick:o,children:_}),at=()=>{const _=P(),o=j(t=>t.currentUser),c=j(t=>t.refreshThirdPartyBindings),[l,r]=i.useState(0),g=i.useId(),m=i.useRef(null);i.useEffect(()=>{c()},[c]);const v=i.useMemo(()=>o!=null&&o.thirdParty?o.thirdParty.filter(t=>t.provider==="steam"&&t.is_bound):[],[o==null?void 0:o.thirdParty]),s=i.useMemo(()=>{const t=v.map(n=>({id:`account-${n.bind_id}`,type:"account",data:n})),e=t.findIndex(n=>{var x;return n.type==="account"&&((x=n.data)==null?void 0:x.is_main)===1});if(e!==-1){const n=t.slice(0,e+1),x=t.slice(e+1);return[...n,{id:"add-card",type:"add",data:null},...x]}return[{id:"add-card",type:"add",data:null},...t]},[v]),d=i.useMemo(()=>s.filter(t=>t.type==="account"),[s]),w=i.useMemo(()=>{const t=s.findIndex(e=>{var n;return e.type==="account"&&((n=e.data)==null?void 0:n.is_main)===1});return t!==-1?t:0},[s]);i.useEffect(()=>{if(m.current!==null){const t=s.findIndex(e=>{var n;return e.type==="account"&&((n=e.data)==null?void 0:n.bind_id)===m.current});t!==-1&&r(t),m.current=null}else r(w)},[w,s]);const A=1200,I=20,u=t=>{var n;const e=s[t];return(e==null?void 0:e.type)==="account"&&((n=e.data)==null?void 0:n.is_main)===1?200:180},B=t=>{if(t===0)return 0;let e=0;for(let f=0;f<t;f++)e+=u(f)+I;const n=u(0),x=u(t),h=(n-x)/2;return e+h},M=()=>{const t=u(0);return A/2-t/2},S=i.useMemo(()=>{if(l===0)return!1;const t=s[l];return d.findIndex(n=>n.id===(t==null?void 0:t.id))>0},[l,s,d]),k=i.useMemo(()=>{if(l>=s.length-1)return!1;const t=s[l];return d.findIndex(n=>n.id===(t==null?void 0:t.id))<d.length-1},[l,s,d]),D=()=>{r(t=>{var n;let e=Math.max(0,t-1);return e>0&&((n=s[e])==null?void 0:n.type)==="add"&&(e=Math.max(0,e-1)),e})},F=()=>{r(t=>{var n;let e=Math.min(s.length-1,t+1);return e<s.length-1&&((n=s[e])==null?void 0:n.type)==="add"&&(e=Math.min(s.length-1,e+1)),e})},L=async t=>{try{const e=await E(t);e.code===200?(b.success("设置主账户成功"),m.current=t,await c()):b.error(e.message||"设置主账户失败")}catch(e){console.error("设置主账户失败:",e),b.error("设置主账户失败")}};return a.jsxs("div",{className:p("relative","w-screen h-screen mx-auto","flex items-center justify-center","z-30","overflow-y-auto","bg-[var(--Background)]","px-0 min-[360px]:px-5"),"data-name":"登陆页面",children:[a.jsx("img",{src:W,alt:"Login Page Logo",className:"absolute top-[38px] left-[29px]"}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("h2",{className:"flex items-center gap-2 text-b100 text-2xl font-black leading-8.5",children:["绑定Steam账号"," ",a.jsx("img",{src:q,alt:"help",className:"w-4 h-4 relative top-0.5 cursor-help","data-tooltip-id":g,"data-tooltip-content":"点击左右按钮浏览账户，点击卡片设置为主账户"})]}),a.jsxs("div",{className:"relative w-[1200px]",children:[a.jsx("div",{className:"overflow-hidden py-15",children:a.jsx("div",{className:"flex items-center transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${B(l)}px)`,paddingLeft:`${M()}px`},children:s.map((t,e)=>a.jsx("div",{className:"flex-shrink-0",style:{marginRight:e<s.length-1?"20px":"0"},children:t.type==="account"&&t.data?a.jsx(C,{avatar:t.data.avatar,name:t.data.nickname,isMain:t.data.is_main===1,onClick:()=>L(t.data.bind_id)}):a.jsx(C,{avatar:U,name:"点击添加",imageSize:84,onClick:()=>{const n=window.location.hash.slice(1);localStorage.setItem("redirectAfterAuth",n),R("steam")}})},t.id))})}),a.jsx(N,{className:p("absolute -left-20 top-1/2 -translate-y-1/2 flex items-center justify-center z-10",(!S||d.length<=1)&&"opacity-40 pointer-events-none"),onClick:D,children:a.jsx(T,{className:"w-4 h-4"})}),a.jsx(N,{className:p("absolute -right-20 top-1/2 -translate-y-1/2 flex items-center justify-center z-10",(!k||d.length<=1)&&"opacity-60 pointer-events-none"),onClick:F,children:a.jsx(X,{className:"w-4 h-4"})}),a.jsx("div",{className:p("absolute bottom-0 left-1/2 -translate-x-1/2 flex justify-center gap-2",d.length<=1&&"invisible"),children:d.map(t=>{var x;const e=s.findIndex(h=>h.id===t.id),n=l===e;return a.jsx("button",{type:"button",className:p("w-[5px] h-[5px] rounded-full transition-all duration-200",n?"bg-white":"bg-b30"),onClick:()=>r(e),"aria-label":`切换到 ${(x=t.data)==null?void 0:x.nickname}`},t.id)})})]}),a.jsxs(z,{variant:"gamesir",className:"mt-10 w-[210px] py-1.5 text-sm text-b65 leading-5 font-normal flex items-center gap-2",onClick:()=>_(-1),children:["进入盖世游戏",a.jsx("img",{src:Z,alt:"double right"})]})]}),a.jsx("div",{className:"absolute inset-0 pointer-events-none shadow-[0px_4px_250px_0px_inset_rgba(9,44,68,0.25)]"}),a.jsxs("div",{className:"absolute left-0 top-0 w-full h-[58px] lg:h-[169px] overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-0 w-full h-[58px] opacity-20 lg:h-[169px] [background:radial-gradient(71.28%_50%_at_50%_0%,#BAD7F5_0%,rgba(9,44,68,0.3)_75%,rgba(9,44,68,0)_100%)]"}),a.jsx("div",{className:"absolute left-0 -top-24 opacity-25  w-full h-[58px] rotate-180 lg:h-[169px] [background:linear-gradient(to_bottom_right,#BAD7F5_0%,rgba(9,44,68,0)_50%)_bottom_right/50%_50%_no-repeat,linear-gradient(to_bottom_left,#BAD7F5_0%,rgba(9,44,68,0)_50%)_bottom_left/50%_50%_no-repeat,linear-gradient(to_top_left,#BAD7F5_0%,rgba(9,44,68,0)_50%)_top_left/50%_50%_no-repeat,linear-gradient(to_top_right,#BAD7F5_0%,rgba(9,44,68,0)_50%)_top_right/50%_50%_no-repeat]"}),a.jsx("img",{className:"w-full h-[58px] lg:h-[169px]",src:"/images/top-effect.png",alt:"顶部图片"})]}),a.jsxs("div",{className:"absolute right-0 bottom-0 w-full h-[58px] lg:h-[169px] overflow-hidden",children:[a.jsx("div",{className:"absolute right-0 bottom-0 w-full h-[58px] rotate-180 opacity-20 lg:h-[169px] [background:radial-gradient(71.28%_50%_at_50%_0%,#BAD7F5_0%,rgba(9,44,68,0.3)_75%,rgba(9,44,68,0)_100%)]"}),a.jsx("div",{className:"absolute right-0 -bottom-24 opacity-25 w-full h-[58px] lg:h-[169px] [background:linear-gradient(to_bottom_right,#BAD7F5_0%,rgba(9,44,68,0)_50%)_bottom_right/50%_50%_no-repeat,linear-gradient(to_bottom_left,#BAD7F5_0%,rgba(9,44,68,0)_50%)_bottom_left/50%_50%_no-repeat,linear-gradient(to_top_left,#BAD7F5_0%,rgba(9,44,68,0)_50%)_top_left/50%_50%_no-repeat,linear-gradient(to_top_right,#BAD7F5_0%,rgba(9,44,68,0)_50%)_top_right/50%_50%_no-repeat]"}),a.jsx("img",{className:"w-full h-[58px] lg:h-[169px] z-50",src:"/images/bottom-effect.png",alt:"底部图片"})]}),a.jsx($,{id:g,place:"bottom",style:{zIndex:9999}})]})};export{at as default};
