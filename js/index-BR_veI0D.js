import{aF as v,j as e,a as n,R as b,al as f,i as j,r as h,e as w,d as _}from"./index-CybXJaB_.js";import{C as o}from"./ContainerSkeleton-B-oo09NS.js";import{p as C}from"./purify.es-CEVJ7K31.js";import{l as T}from"./load-parse-DuceWXsx.js";const k=(i,s=!1)=>v.get(`/game/v1/public/a_article/${i}`,{params:s?{preview:"true"}:{}}),N="_blurBackdrop_9a6rj_11",L="_activityContentContainer_9a6rj_27",y={blurBackdrop:N,activityContentContainer:L},R="_activityHeader_1911c_2",A="_activityTitle_1911c_6",S="_activityMeta_1911c_14",u={activityHeader:R,activityTitle:A,activityMeta:S},$=({title:i,operator:s})=>e.jsxs("div",{className:n(u.activityHeader),children:[e.jsx("h1",{className:n(u.activityTitle),children:i}),e.jsx("div",{className:n(u.activityMeta),style:{marginTop:"30px"},children:e.jsx("p",{children:s})})]}),H=b.memo(({htmlContent:i})=>{console.log("HTML Content:",i);const s=C.sanitize(i,{ADD_ATTR:["target"]}),t=T(s);t("video").attr("autoplay","true"),t("video").attr("loop","true"),t("video").attr("muted","true"),t("video").attr("playsinline","true"),t("video").attr("preload","auto"),t("video").attr("disablePictureInPicture","true"),t("video").attr("controlsList","nodownload nofullscreen noremoteplayback"),t("a").each((c,x)=>{const a=t(x);a.attr("target")==="_blank"&&a.attr("rel","noopener noreferrer")}),t("p").addClass("text-[var(--Title)] text-[14px] font-normal leading-[20px] text-left mt-7.5"),t("img").addClass("mx-auto mt-7.5"),t("video").addClass("mx-auto mt-7.5"),t("h1").addClass("text-2xl mt-8"),t("h2").addClass("text-xl mt-8"),t("h3").addClass("text-lg mt-8"),t("h4").addClass("text-md mt-8"),t("ul").addClass("list-disc pl-5 space-y-2 mt-7.5"),t("ol").addClass("list-decimal pl-5 space-y-2 mt-7.5"),t("table").addClass("border-collapse mt-7.5 w-full"),t("table").css("border-collapse","collapse"),t("th, td").addClass("border border-Title-30 px-4 py-2 text-[var(--Title)] text-[14px]"),t("th").addClass("bg-[var(--Title)]/5 font-semibold");const d=t.html();return e.jsx("div",{dangerouslySetInnerHTML:{__html:d}})}),M=i=>{const s=new Date(i*1e3),t=s.getFullYear(),d=(s.getMonth()+1).toString().padStart(2,"0"),c=s.getDate().toString().padStart(2,"0");return`${t}/${d}/${c}`},z=()=>{var m;const{activityId:i}=f(),[s]=j();console.log("活动ID:",i);const[t,d]=h.useState(window.innerWidth<1e3),c=w(r=>r.sources),x=s.get("preview")==="true",{data:a,isLoading:g}=_({queryKey:["articleDetail",i,x],queryFn:async()=>{const r=await k(Number(i),x);return r.code===200?r.data:null},enabled:!!i,staleTime:1e3*60*2,gcTime:1e3*60*4,retry:!1});console.log("apiActivity:",a);const l=a?{id:String(a.id),bannerImageUrl:a.content_img,title:a.title,operator:((m=c.find(r=>r.key===a.source))==null?void 0:m.name)||a.source||"盖世游戏运营",activityTime:M(a.publish_time),views:a.view_count||0,content:a.content_html||a.content||"",url:a.url,source:a.source,source_game_name:a.source_game_name}:null;return h.useEffect(()=>{const r=()=>{d(window.innerWidth<1e3)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),g?e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(o,{isLoading:!0,delay:0,borderRadius:"16px",style:{width:"100%",aspectRatio:"1160/348"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})}),e.jsxs("div",{className:"w-full mt-[30px] p-[50px] bg-b5 rounded-2xl border border-b10 shadow-[0_4px_4px_0_rgba(0,0,0,0.25)]",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(o,{isLoading:!0,delay:0,borderRadius:"8px",style:{width:"500px",height:"46px"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})})}),e.jsx("div",{className:"flex justify-center",style:{marginTop:"30px"},children:e.jsx(o,{isLoading:!0,delay:0,borderRadius:"4px",style:{width:"250px",height:"24px"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})})}),e.jsx("div",{className:"bg-[rgba(186,215,245,0.2)] h-px shrink-0 w-full",style:{marginTop:"30px"}}),e.jsxs("div",{className:"flex flex-col gap-[30px] w-full",style:{marginTop:"30px"},children:[e.jsx(o,{isLoading:!0,delay:0,borderRadius:"8px",style:{width:"100%",height:"420px"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})}),e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:2}).map((r,p)=>e.jsx(o,{isLoading:!0,delay:0,borderRadius:"4px",style:{width:"100%",height:"16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})},`text-line-1-${p}`))}),e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:3}).map((r,p)=>e.jsx(o,{isLoading:!0,delay:0,borderRadius:"4px",style:{width:"100%",height:"16px"},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"transparent"}})},`text-line-2-${p}`))})]})]})]})}):l?e.jsxs("div",{className:n("h-full"),style:{paddingTop:t?"20px":"0px"},children:[e.jsx("div",{className:y.blurBackdrop,style:{backgroundImage:`url(${l.bannerImageUrl})`}}),e.jsxs("div",{className:n("w-full bg-b5 backdrop-blur-[15px] backdrop-filter rounded-2xl","mt-[30px] p-[50px]","border border-b10 border-solid","shadow-[0_4px_4px_0_rgba(0,0,0,0.25)]",y.activityContentContainer),children:[e.jsx($,{title:l.title,operator:l.operator,activityTime:l.activityTime,views:l.views}),e.jsx("div",{className:"bg-[rgba(186,215,245,0.2)] h-px shrink-0 w-full",style:{marginTop:"30px"}}),e.jsx(H,{htmlContent:l.content})]}),e.jsx("p",{className:n("flex items-center justify-center","py-7.5","text-b65 text-xs font-medium leading-4"),children:"已经到底啦～"})]}):e.jsx("div",{className:n("flex items-center justify-center","h-full bg-[#10131d]","text-white","page"),children:"活动不存在..."})};export{z as default};
