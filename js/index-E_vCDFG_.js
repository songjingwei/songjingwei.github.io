import{b as m,m as p,r as c,j as e,a as i,B as h,a0 as g,ay as u,a3 as x,X as f}from"./index-CybXJaB_.js";import{d as v}from"./DoubleChevron_Right-DMi0VZvK.js";import{S as _}from"./SteamIcon-CWf_uew3.js";const j="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16663%2013.3332V9.99984C9.16663%209.5396%209.53972%209.1665%209.99996%209.1665C10.4602%209.1665%2010.8333%209.5396%2010.8333%209.99984V13.3332C10.8333%2013.7934%2010.4602%2014.1665%209.99996%2014.1665C9.53972%2014.1665%209.16663%2013.7934%209.16663%2013.3332Z'%20fill='%23BAD7F5'/%3e%3cpath%20d='M9.99996%205.4165C10.6903%205.4165%2011.25%205.97615%2011.25%206.6665C11.2499%207.35684%2010.6903%207.9165%209.99996%207.9165C9.30962%207.9165%208.74999%207.35684%208.74996%206.6665C8.74996%205.97615%209.3096%205.4165%209.99996%205.4165Z'%20fill='%23BAD7F5'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.99996%201.6665C14.6023%201.6665%2018.3333%205.39746%2018.3333%209.99984C18.3333%2014.6022%2014.6023%2018.3332%209.99996%2018.3332C5.39758%2018.3332%201.66663%2014.6022%201.66663%209.99984C1.66663%205.39746%205.39758%201.6665%209.99996%201.6665ZM9.99996%203.33317C6.31806%203.33317%203.33329%206.31794%203.33329%209.99984C3.33329%2013.6818%206.31806%2016.6665%209.99996%2016.6665C13.6819%2016.6665%2016.6666%2013.6818%2016.6666%209.99984C16.6666%206.31794%2013.6819%203.33317%209.99996%203.33317Z'%20fill='%23BAD7F5'/%3e%3c/svg%3e",y=({avatar:n,nickname:t,isMain:r,onClick:s})=>{const d=r?{}:{onClick:()=>s(),onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),s())},role:"button",tabIndex:0,"aria-label":"设为主账号"};return e.jsxs("div",{className:i("h-18.5","relative flex items-center gap-3 py-4 px-5 rounded-2xl border","bg-b5 border-b10","backdrop-blur-[35px]","shadow-[0_9px_28px_8px_rgba(0,0,0,0.02),0_6px_16px_0_rgba(0,0,0,0.05),0_3px_6px_-4px_rgba(0,0,0,0.09)]",!r&&"cursor-pointer hover:bg-b15 hover:border-b20 transition-all"),...d,children:[r&&e.jsx("div",{className:i("absolute top-0 -right-[1px] px-3 py-0.5","bg-[rgba(0,173,238,0.05)] backdrop-blur-lg","text-[#00adee] text-[10px] leading-3.5 font-bold","rounded-bl-2xl rounded-tr-2xl"),children:"当前账号"}),e.jsx("img",{src:n,alt:t,className:"w-10 h-10 flex-shrink-0"}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:"text-b65 text-sm truncate",children:t})})]})},k=()=>{const n=m(),t=p(a=>a.currentUser),r=p(a=>a.refreshThirdPartyBindings),s=c.useId();c.useEffect(()=>{r()},[r]);const d=c.useMemo(()=>t!=null&&t.thirdParty?t.thirdParty.filter(a=>a.provider==="steam"&&a.is_bound):[],[t==null?void 0:t.thirdParty]),l=()=>{f("steam")},b=async a=>{try{const o=await u(a);o.code===200?(x.success("设置主账户成功"),await r()):x.error(o.message||"设置主账户失败")}catch(o){console.error("设置主账户失败:",o),x.error("设置主账户失败")}};return e.jsxs("div",{className:"overflow-clip relative rounded-[20px] size-full min-h-[calc(100vh-100px)] flex flex-col","data-name":"Steam账号管理",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-4 pb-7.5",children:[e.jsx("h2",{className:"text-b100 text-xl font-bold",children:"绑定Steam账号"}),e.jsx("img",{src:j,alt:"help",className:"w-4 h-4 relative top-[1px] cursor-pointer opacity-70 hover:opacity-100 transition-opacity","data-tooltip-id":s,"data-tooltip-content":"点击账号卡片设为主账号"})]}),e.jsx("div",{className:"flex-1 backdrop-blur-lg px-2 pb-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[d.map(a=>e.jsx(y,{avatar:a.avatar,nickname:a.nickname,isMain:a.is_main===1,onClick:()=>b(a.bind_id)},a.bind_id)),e.jsxs("button",{type:"button",onClick:l,className:i("h-18.5","flex items-center gap-3 p-6 rounded-2xl border","bg-b5 border-b10","backdrop-blur-[25px]","shadow-[0_9px_28px_8px_rgba(0,0,0,0.02),0_6px_16px_0_rgba(0,0,0,0.05),0_3px_6px_-4px_rgba(0,0,0,0.09)]","text-b65 hover:text-b100 hover:border-b30 hover:bg-b15","transition-all duration-200"),children:[e.jsx(_,{className:"w-8.5 h-8.5"}),e.jsx("span",{className:"text-sm font-medium",children:"点击添加"})]})]})}),e.jsx("div",{className:"px-2 py-7 shrink-0",children:e.jsxs(h,{variant:"gamesir",className:i("w-full py-1.5 text-sm text-b65 leading-5 font-normal","flex items-center justify-center gap-2.5","bg-b5 border border-b10","backdrop-blur-[30px] rounded-2xl","hover:bg-b10 transition-colors"),onClick:()=>n(-1),children:["进入盖世游戏",e.jsx("img",{src:v,alt:"double right"})]})}),e.jsx(g,{id:s,className:"max-w-[400px] z-[9999]"})]})};export{k as default};
