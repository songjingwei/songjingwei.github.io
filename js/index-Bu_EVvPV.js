import{j as e,r as c,a as d,E as N}from"./index-CybXJaB_.js";import{H as S}from"./HeartIcon-B-fRnsR9.js";import{N as u}from"./index-oH4-aH7I.js";import{S as g}from"./index-BNj5bqZy.js";import{P as R}from"./PLATFORM_ICON_MAP-pSA7Oz_G.js";const F=r=>{const{text:a}=r;return e.jsxs("div",{className:"flex items-center gap-1 leading-4 flex-shrink-0",children:[e.jsx("span",{style:{color:"var(--65, rgba(186, 215, 245, 0.65))",fontFamily:'"Noto Sans SC"',fontSize:"12px",fontStyle:"normal",fontWeight:"400",lineHeight:"16px",whiteSpace:"nowrap"},className:"text-xs",children:a}),e.jsx("div",{style:{width:"2px",height:"2px",backgroundColor:"var(--65, rgba(186, 215, 245, 0.65))",borderRadius:"50%",flexShrink:0}})]})};function I(r){const[a,m]=c.useState(!1),l=c.useRef(null),t=r==null?void 0:r.root,n=r==null?void 0:r.rootMargin,x=r==null?void 0:r.threshold,s=c.useMemo(()=>typeof window>"u"||!("IntersectionObserver"in window)?null:new IntersectionObserver(([i])=>{i.isIntersecting&&(m(!0),l.current&&(s==null||s.unobserve(l.current)))},{root:t,rootMargin:n,threshold:x}),[t,n,x]);return c.useEffect(()=>{const i=l.current;return i&&s&&s.observe(i),()=>{s&&s.disconnect()}},[s]),{ref:l,isIntersecting:a}}const b=r=>r<=20?"#FF614C":r<=69?"#F9D802":"#92D6FF",k=({title:r,cover:a,tags:m,platforms:l,value:t,type:n,onClick:x,isLoading:s=!1,style:i,maxTags:j=3,enableLazyLoad:w=!1})=>{const{ref:v,isIntersecting:y}=I({threshold:0,rootMargin:"400px 400px 400px 400px"}),f=c.useRef(!1);y&&!f.current&&(f.current=!0);const h=!w||f.current;return s?e.jsxs("div",{className:d("flex flex-col items-start","game-card-item","min-w-[calc(100%-5px)] sm:min-w-[calc(50%-10px)] lg:min-w-[calc(25%-15px)]"),style:{width:"275px",flexShrink:0,gap:"12px",paddingBottom:"12px"},children:[e.jsx(u,{width:"100%",height:"100%",style:{aspectRatio:"275/158",borderRadius:"16px"}}),e.jsxs("div",{className:"w-full flex flex-col",style:{gap:"8px"},children:[e.jsx(u,{width:"100%",height:22,style:{borderRadius:"4px"}}),e.jsx(u,{width:"40%",height:16,style:{borderRadius:"4px"}})]})]}):e.jsxs("button",{type:"button",ref:v,className:d("flex flex-col items-start","game-card-item cursor-pointer group","min-w-[calc(100%-5px)] sm:min-w-[calc(50%-10px)] lg:min-w-[calc(25%-15px)]"),style:{width:"275px",flexShrink:0,gap:"12px",paddingBottom:"12px",...i},onClick:x,"aria-label":`查看游戏详情: ${r}`,children:[e.jsx(N,{className:"relative aspect-[275/158] z-1",borderRadius:"16px",blurRadius:"8px",children:e.jsxs(e.Fragment,{children:[n!=="seeMore"&&e.jsx(e.Fragment,{children:h?e.jsx(g,{src:a,progressive:!1,loading:"lazy",className:d("rounded-2xl object-cover","transition-transform duration-300 ease-out","group-hover:scale-110"),style:{borderRadius:"1rem"},alt:"game cover"}):e.jsx("div",{className:"w-full h-full rounded-2xl",style:{background:"var(--5, rgba(186, 215, 245, 0.05))",borderRadius:"1rem"}})}),n==="seeMore"&&e.jsx("div",{className:"absolute w-[calc(100%-2px)] aspect-[275/158] rounded-2xl bg-[#212733] border boder-solid border-b10",children:e.jsx("div",{className:"relative w-full h-full flex justify-center items-center",children:h?e.jsx(g,{src:a,className:d("rounded-2xl object-cover","transition-transform duration-300 ease-out","group-hover:scale-110"),style:{width:"150px",height:"120px",borderRadius:"1rem"},alt:"game cover"}):e.jsx("div",{style:{width:"150px",height:"120px",borderRadius:"1rem",background:"var(--5, rgba(186, 215, 245, 0.05))"}})})})]})}),n!=="seeMore"?e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsxs("div",{className:"flex items-center justify-between w-full text-[#BAD7F5] font-bold text-base",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"truncate text-left",title:r,children:r})}),t&&t!==-1?e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[e.jsx(S,{className:"text-sm",style:{color:b(t)}}),e.jsxs("span",{style:{color:b(t),fontFamily:"Noto Sans SC",fontSize:"14px",fontStyle:"normal",fontWeight:700,lineHeight:"20px"},children:[t,"%"]})]}):e.jsx("span",{className:"text-xs flex-shrink-0 ml-2",style:{color:"#898989",fontFamily:"Noto Sans SC",fontSize:"14px"},children:"暂无评分"})]}),e.jsxs("div",{className:"w-full flex items-start gap-1.5 flex-wrap",style:{minHeight:"auto"},children:[m.slice(0,j).map(o=>e.jsx(F,{text:o},o)),l.map(o=>{const p=R[o];return p?e.jsx(p,{className:"w-4 h-4",style:{color:"var(--65, rgba(186, 215, 245, 0.65))"}},o):null})]})]}):e.jsx("div",{className:"w-full text-[#BAD7F5] font-bold text-base",children:e.jsx("div",{className:"truncate text-center",title:r,children:r})})]})},H=c.memo(k);export{H as G,I as u};
