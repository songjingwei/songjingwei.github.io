import{b as C,an as N,r as t,m as _,j as e,B as c,at as k,a3 as d}from"./index-CybXJaB_.js";import{V as y}from"./index-Bq0sdVVw.js";import{u as S,c as V}from"./useCurrentZoneCode-DzYT5yxN.js";import"./useVerifyCodeMutation-yTHkI_Sq.js";const z=()=>{const x=C(),p=N(),[u,h]=t.useState([]),{checkVerificationCode:b}=p.state||{checkVerificationCode:""},[o,g]=t.useState(""),[l,v]=t.useState(""),[n,f]=t.useState(!1),[a,m]=t.useState({name:"中国",code:"+86"}),j=_(s=>s.refresh),i=S();t.useEffect(()=>{const s={name:i.name||"中国",code:i.code||"+86"};m(s),h([s])},[i]);const w=async()=>{const s={new_mobile:o,code:l,old_mobile_code:b,zone_code:a.code.replace("+","")};try{const r=await V(s);r.code===200?(d.success("手机号更换成功！"),j(),x("/mobile-user")):d.error(r.message||"手机号更换失败，请重试")}catch(r){console.error(r),d.error(r.message||"请求失败，请稍后重试")}};return e.jsxs("div",{className:"bg-[#10131d] overflow-clip relative rounded-[20px] size-full min-h-[calc(100vh-100px)] flex flex-col items-center","data-name":"设置自适应-常规设置",children:[e.jsxs("div",{className:"box-border content-stretch flex flex-col gap-6 items-start justify-start px-4 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-3 items-start w-full",children:[e.jsx("div",{className:"flex flex-row gap-2.5 items-start justify-end w-full",children:e.jsx("div",{className:"basis-0 font-['Noto_Sans_SC:Bold',_sans-serif] font-bold grow leading-[22px] min-h-px min-w-px relative shrink-0 text-[#dfefff] text-base text-left",children:"绑定新手机"})}),e.jsx("div",{className:"font-['Noto_Sans_SC:Regular',_sans-serif] font-normal leading-[20px] relative shrink-0 text-b100 text-sm text-left w-full",children:e.jsx("p",{className:"block",children:"绑定后即可用该手机号登录盖世游戏PC端"})})]}),e.jsxs("div",{className:"w-full mb-4 flex items-center gap-2 relative",children:[e.jsxs(c,{variant:"gamesir",className:`flex-shrink-0 bg-b15 rounded-[5px] px-3 flex items-center justify-between gap-2 ${n?"text-b100":"text-white hover:text-b100"}`,onClick:()=>f(!n),children:[e.jsx("span",{children:a.code}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`h-4 w-4 transition-transform ${n?"rotate-180 text-b100":"text-white hover:text-b100"}`,children:[e.jsx("title",{children:"下拉箭头"}),e.jsx("polyline",{points:"6 9 12 15 18 9"})]})]}),n&&e.jsx("div",{className:"absolute z-10 top-full left-0 mt-2 w-[200px] p-1 bg-[#161a25] rounded-lg shadow-[0px_9px_28px_8px_rgba(0,0,0,0.02),0px_6px_16px_0px_rgba(0,0,0,0.05),0px_3px_6px_-4px_rgba(0,0,0,0.09)] border-none max-h-60 overflow-y-auto",children:u.map(s=>e.jsxs("button",{type:"button",onClick:()=>{m({name:s.name||"中国",code:s.code||"+86"}),f(!1)},className:`flex items-center justify-between w-full px-2 py-[9px] rounded-[5px] cursor-pointer text-base leading-[22px] ${a.code===s.code?"bg-b15 text-[#92d6ff]":"text-b100"} hover:bg-b10 hover:text-[#92d6ff] focus:bg-b10 focus:text-[#92d6ff]`,children:[e.jsx("span",{children:s.name}),e.jsx("span",{children:s.code})]},s.code))}),e.jsx(k,{id:t.useId(),type:"text",variant:"gamesir",placeholder:"输入新手机号",className:"flex-1 mt-0",value:o,onChange:s=>g(s.target.value)})]}),e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"mt-2",children:e.jsx(y,{verificationCode:l,onVerificationCodeChange:v,scene:"change_mobile",currentMobile:o,currentZoneCode:a.code.replace("+",""),disabled:!o||o.length===0})})})]}),e.jsxs("div",{className:"absolute bottom-0 box-border content-stretch flex flex-row gap-3 items-start justify-start p-[20px] w-full",children:[e.jsx(c,{variant:"gamesir",className:"flex-1",onClick:()=>x("/mobile-user"),children:"取消"}),e.jsx(c,{variant:"gamesir-primary",className:"flex-1",onClick:w,disabled:!o||!l||!a.code,children:"绑定"})]})]})};export{z as default};
