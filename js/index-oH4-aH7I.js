import{u as z,r as i,j as c}from"./index-CybXJaB_.js";const k=({width:n=100,height:a=100,style:x,className:g,src:s,alt:f,imgClassName:m,imgStyle:p,progressive:d=!1,loading:_="lazy"})=>{const w=z("(max-width: 1023px)"),y=o=>{if(!o)return!1;const r=new Image;return r.src=o,r.complete&&r.naturalWidth>0},e=i.useMemo(()=>!s||!w||s.includes("resize,p_70")?s:s.includes("?")?s.includes("image_process=")?`${s}/resize,p_70`:`${s}&image_process=resize,p_70`:`${s}?image_process=resize,p_70`,[s,w]),u=i.useMemo(()=>{if(e)return e.includes("?")?e.includes("image_process")?`${e}/quality,q_5/resize,p_60`:`${e}&image_process=quality,q_5/resize,p_70`:`${e}?image_process=quality,q_5/resize,p_70`},[e]),[l,t]=i.useState(()=>!y(e)),[b,j]=i.useState(!1);if(i.useEffect(()=>{if(!e){t(!0);return}if(d&&u){const o=new Image;o.onload=()=>{j(!0);const r=new Image;r.onload=()=>{t(!1)},r.onerror=()=>{t(!0)},r.src=e},o.onerror=()=>{j(!1);const r=new Image;r.onload=()=>{t(!1)},r.onerror=()=>{t(!0)},r.src=e},o.src=u}else{const o=new Image;o.onload=()=>{t(!1)},o.onerror=()=>{t(!0)},o.src=e}},[e,d,u]),d&&e){if(l&&!b)return c.jsx("div",{className:g,style:{width:n,height:a,borderRadius:"6px",background:"var(--5, rgba(186, 215, 245, 0.05))",...x}});if(b&&l&&u)return c.jsx("img",{src:u,alt:f||"",className:m,loading:_,style:{width:n,height:a,objectFit:"cover",...p}});if(!l)return c.jsx("img",{src:e,alt:f||"",className:m,loading:_,style:{width:n,height:a,objectFit:"cover",...p}})}return l?c.jsx("div",{className:g,style:{width:n,height:a,borderRadius:"6px",background:"var(--5, rgba(186, 215, 245, 0.05))",...x}}):c.jsx("img",{src:e,alt:f||"",className:m,loading:_,style:{width:n,height:a,objectFit:"cover",...p}})};export{k as N};
