import{b as h,al as u,m as f,r as b,j as e,as as g,B as j,a3 as t,ax as v}from"./index-CybXJaB_.js";import{V as N}from"./index-Bq0sdVVw.js";import"./useVerifyCodeMutation-yTHkI_Sq.js";const _=()=>{const c=h(),{id:s}=u(),{refreshThirdPartyBindings:x}=f(),[a,m]=b.useState(""),l=f(i=>i.currentUser),r=s==="wechat"?"微信":s==="qq"?"QQ":s==="google"?"Google":s==="steam"?"Steam":s||"第三方平台",p=async()=>{var i,d;if(!s){t.error("未指定要解绑的平台");return}try{const n=(d=(i=l==null?void 0:l.thirdParty)==null?void 0:i.find(o=>o.provider===s.toLowerCase()))==null?void 0:d.bind_id;if(n){const o=await v({provider:s,code:a,bind_id:n});o.code===200?(t.success("解绑成功！"),c("/mobile-user")):t.error(`解绑失败: ${o.message}`)}else t.error("未找到绑定信息")}catch(n){t.error(`解绑失败: ${n.message}`)}finally{await x()}};return e.jsxs("div",{className:"bg-[#10131d] overflow-clip relative rounded-[20px] size-full min-h-[calc(100vh-100px)] flex flex-col items-center","data-name":"设置自适应-常规设置",children:[e.jsxs("div",{className:"box-border content-stretch flex flex-col gap-6 items-start justify-start px-4 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-3 items-start w-full",children:[e.jsx("div",{className:"flex flex-row gap-2.5 items-start justify-end w-full",children:e.jsx("div",{className:"basis-0 font-['Noto_Sans_SC:Bold',_sans-serif] font-bold grow leading-[22px] min-h-px min-w-px relative shrink-0 text-[#dfefff] text-[16px] text-left",children:`解除${r}绑定`})}),e.jsxs("div",{className:"font-['Noto_Sans_SC:Regular',_sans-serif] font-normal leading-[20px] relative shrink-0 text-[#bad7f5] text-[14px] text-left w-full",children:[e.jsxs("p",{className:"block mb-0",children:["解绑后将无法使用该",r,"登录此账号！"]}),e.jsxs("p",{children:[e.jsxs("span",{children:["您当前绑定的",r,"："]}),e.jsxs("span",{className:"font-['Noto_Sans_SC:Bold',_sans-serif] font-bold text-[#b2fcff]",children:[r,"账号"]})]})]})]}),e.jsx(N,{verificationCode:a,onVerificationCodeChange:m,scene:"unbundling"})]}),e.jsxs("div",{className:"absolute bottom-0 box-border content-stretch flex flex-row gap-3 items-start justify-start p-[20px] w-full",children:[e.jsx(g,{className:"flex-1",onClick:()=>c("/mobile-user"),children:"取消"}),e.jsx(j,{type:"button",variant:"gamesir-primary",className:"flex-1",onClick:p,disabled:!a||a.length===0,children:"确认解绑"})]})]})};export{_ as default};
